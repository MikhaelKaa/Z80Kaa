ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"z80ramm_tests.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.z80ramm_test,"ax",%progbits
  16              		.align	1
  17              		.global	z80ramm_test
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	z80ramm_test:
  25              	.LFB401:
  26              		.file 1 "App/z80ramm/z80ramm_tests.c"
   1:App/z80ramm/z80ramm_tests.c **** // Header: z80 ram manager тестовые функции, для отладки.
   2:App/z80ramm/z80ramm_tests.c **** // File Name: z80ramm.c
   3:App/z80ramm/z80ramm_tests.c **** // Author: Mikhail Kaa
   4:App/z80ramm/z80ramm_tests.c **** // Date: 11.11.2023
   5:App/z80ramm/z80ramm_tests.c **** 
   6:App/z80ramm/z80ramm_tests.c **** #include <stdio.h>
   7:App/z80ramm/z80ramm_tests.c **** #include "z80ramm_.h"
   8:App/z80ramm/z80ramm_tests.c **** #include "retarget.h"
   9:App/z80ramm/z80ramm_tests.c **** 
  10:App/z80ramm/z80ramm_tests.c **** // Тест чтения записи памяти.
  11:App/z80ramm/z80ramm_tests.c **** void z80ramm_test(void) {
  27              		.loc 1 11 25 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31 0000 70B5     		push	{r4, r5, r6, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 16
  34              		.cfi_offset 4, -16
  35              		.cfi_offset 5, -12
  36              		.cfi_offset 6, -8
  37              		.cfi_offset 14, -4
  12:App/z80ramm/z80ramm_tests.c ****     if(!z80_is_stopped) z80ramm_suspend_cpu();
  38              		.loc 1 12 5 view .LVU1
  39              		.loc 1 12 8 is_stmt 0 view .LVU2
  40 0002 294B     		ldr	r3, .L17
  41 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  42              		.loc 1 12 7 view .LVU3
  43 0006 23B1     		cbz	r3, .L13
  44              	.L2:
  13:App/z80ramm/z80ramm_tests.c **** 
  14:App/z80ramm/z80ramm_tests.c ****     uint8_t temp = 0;
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 2


  45              		.loc 1 14 5 is_stmt 1 view .LVU4
  46              	.LVL0:
  15:App/z80ramm/z80ramm_tests.c ****     printf("test ram\r\n");
  47              		.loc 1 15 5 view .LVU5
  48 0008 2848     		ldr	r0, .L17+4
  49 000a FFF7FEFF 		bl	puts
  50              	.LVL1:
  16:App/z80ramm/z80ramm_tests.c ****     for(uint16_t adr = 0; adr <= 512; adr++) {
  51              		.loc 1 16 5 view .LVU6
  52              	.LBB2:
  53              		.loc 1 16 9 view .LVU7
  54              		.loc 1 16 18 is_stmt 0 view .LVU8
  55 000e 0024     		movs	r4, #0
  56              		.loc 1 16 5 view .LVU9
  57 0010 11E0     		b	.L3
  58              	.LVL2:
  59              	.L13:
  60              		.loc 1 16 5 view .LVU10
  61              	.LBE2:
  12:App/z80ramm/z80ramm_tests.c **** 
  62              		.loc 1 12 25 is_stmt 1 discriminator 1 view .LVU11
  63 0012 FFF7FEFF 		bl	z80ramm_suspend_cpu
  64              	.LVL3:
  65 0016 F7E7     		b	.L2
  66              	.LVL4:
  67              	.L4:
  68              	.LBB4:
  17:App/z80ramm/z80ramm_tests.c ****         temp = z80ramm_read(adr);
  18:App/z80ramm/z80ramm_tests.c ****         printf("read 0x%04x 0x%02x\r\n", adr, temp);
  19:App/z80ramm/z80ramm_tests.c ****         z80ramm_write(adr, 0);
  20:App/z80ramm/z80ramm_tests.c ****         if(z80ramm_read(adr) != 0) {
  21:App/z80ramm/z80ramm_tests.c ****             printf("Error at 0x%04x\r\n", adr);
  22:App/z80ramm/z80ramm_tests.c ****         } else {
  23:App/z80ramm/z80ramm_tests.c ****             printf("OK at 0x%04x\r\n", adr);
  69              		.loc 1 23 13 view .LVU12
  70 0018 2146     		mov	r1, r4
  71 001a 2548     		ldr	r0, .L17+8
  72 001c FFF7FEFF 		bl	printf
  73              	.LVL5:
  74 0020 23E0     		b	.L5
  75              	.L6:
  24:App/z80ramm/z80ramm_tests.c ****         }
  25:App/z80ramm/z80ramm_tests.c ****         z80ramm_write(adr, temp);
  26:App/z80ramm/z80ramm_tests.c ****         printf("write 0x%04x 0x%02x\r\n", adr, temp);
  27:App/z80ramm/z80ramm_tests.c ****         if(z80ramm_read(adr) != temp) {
  28:App/z80ramm/z80ramm_tests.c ****             printf("Error at 0x%04x\r\n", adr);
  29:App/z80ramm/z80ramm_tests.c ****         } else {
  30:App/z80ramm/z80ramm_tests.c ****             printf("OK at 0x%04x\r\n", adr);
  76              		.loc 1 30 13 view .LVU13
  77 0022 3146     		mov	r1, r6
  78 0024 2248     		ldr	r0, .L17+8
  79 0026 FFF7FEFF 		bl	printf
  80              	.LVL6:
  81 002a 30E0     		b	.L7
  82              	.L15:
  31:App/z80ramm/z80ramm_tests.c ****         }
  32:App/z80ramm/z80ramm_tests.c ****         if(adr%32 == 0) printf_flush();
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 3


  83              		.loc 1 32 25 discriminator 1 view .LVU14
  84 002c FFF7FEFF 		bl	printf_flush
  85              	.LVL7:
  86 0030 30E0     		b	.L8
  87              	.LVL8:
  88              	.L16:
  16:App/z80ramm/z80ramm_tests.c ****         temp = z80ramm_read(adr);
  89              		.loc 1 16 42 is_stmt 0 discriminator 2 view .LVU15
  90 0032 0134     		adds	r4, r4, #1
  91              	.LVL9:
  16:App/z80ramm/z80ramm_tests.c ****         temp = z80ramm_read(adr);
  92              		.loc 1 16 42 discriminator 2 view .LVU16
  93 0034 A4B2     		uxth	r4, r4
  94              	.LVL10:
  95              	.L3:
  16:App/z80ramm/z80ramm_tests.c ****         temp = z80ramm_read(adr);
  96              		.loc 1 16 5 discriminator 1 view .LVU17
  97 0036 B4F5007F 		cmp	r4, #512
  98 003a 32D8     		bhi	.L14
  17:App/z80ramm/z80ramm_tests.c ****         printf("read 0x%04x 0x%02x\r\n", adr, temp);
  99              		.loc 1 17 9 is_stmt 1 view .LVU18
  17:App/z80ramm/z80ramm_tests.c ****         printf("read 0x%04x 0x%02x\r\n", adr, temp);
 100              		.loc 1 17 16 is_stmt 0 view .LVU19
 101 003c 2046     		mov	r0, r4
 102 003e FFF7FEFF 		bl	z80ramm_read
 103              	.LVL11:
 104 0042 0546     		mov	r5, r0
 105              	.LVL12:
  18:App/z80ramm/z80ramm_tests.c ****         z80ramm_write(adr, 0);
 106              		.loc 1 18 9 is_stmt 1 view .LVU20
 107 0044 2646     		mov	r6, r4
 108 0046 0246     		mov	r2, r0
 109 0048 2146     		mov	r1, r4
 110 004a 1A48     		ldr	r0, .L17+12
 111              	.LVL13:
  18:App/z80ramm/z80ramm_tests.c ****         z80ramm_write(adr, 0);
 112              		.loc 1 18 9 is_stmt 0 view .LVU21
 113 004c FFF7FEFF 		bl	printf
 114              	.LVL14:
  19:App/z80ramm/z80ramm_tests.c ****         if(z80ramm_read(adr) != 0) {
 115              		.loc 1 19 9 is_stmt 1 view .LVU22
 116 0050 0021     		movs	r1, #0
 117 0052 2046     		mov	r0, r4
 118 0054 FFF7FEFF 		bl	z80ramm_write
 119              	.LVL15:
  20:App/z80ramm/z80ramm_tests.c ****             printf("Error at 0x%04x\r\n", adr);
 120              		.loc 1 20 9 view .LVU23
  20:App/z80ramm/z80ramm_tests.c ****             printf("Error at 0x%04x\r\n", adr);
 121              		.loc 1 20 12 is_stmt 0 view .LVU24
 122 0058 2046     		mov	r0, r4
 123 005a FFF7FEFF 		bl	z80ramm_read
 124              	.LVL16:
  20:App/z80ramm/z80ramm_tests.c ****             printf("Error at 0x%04x\r\n", adr);
 125              		.loc 1 20 11 view .LVU25
 126 005e 0028     		cmp	r0, #0
 127 0060 DAD0     		beq	.L4
  21:App/z80ramm/z80ramm_tests.c ****         } else {
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 4


 128              		.loc 1 21 13 is_stmt 1 view .LVU26
 129 0062 2146     		mov	r1, r4
 130 0064 1448     		ldr	r0, .L17+16
 131 0066 FFF7FEFF 		bl	printf
 132              	.LVL17:
 133              	.L5:
  25:App/z80ramm/z80ramm_tests.c ****         printf("write 0x%04x 0x%02x\r\n", adr, temp);
 134              		.loc 1 25 9 view .LVU27
 135 006a 2946     		mov	r1, r5
 136 006c 2046     		mov	r0, r4
 137 006e FFF7FEFF 		bl	z80ramm_write
 138              	.LVL18:
  26:App/z80ramm/z80ramm_tests.c ****         if(z80ramm_read(adr) != temp) {
 139              		.loc 1 26 9 view .LVU28
 140 0072 2A46     		mov	r2, r5
 141 0074 3146     		mov	r1, r6
 142 0076 1148     		ldr	r0, .L17+20
 143 0078 FFF7FEFF 		bl	printf
 144              	.LVL19:
  27:App/z80ramm/z80ramm_tests.c ****             printf("Error at 0x%04x\r\n", adr);
 145              		.loc 1 27 9 view .LVU29
  27:App/z80ramm/z80ramm_tests.c ****             printf("Error at 0x%04x\r\n", adr);
 146              		.loc 1 27 12 is_stmt 0 view .LVU30
 147 007c 2046     		mov	r0, r4
 148 007e FFF7FEFF 		bl	z80ramm_read
 149              	.LVL20:
  27:App/z80ramm/z80ramm_tests.c ****             printf("Error at 0x%04x\r\n", adr);
 150              		.loc 1 27 11 view .LVU31
 151 0082 A842     		cmp	r0, r5
 152 0084 CDD0     		beq	.L6
  28:App/z80ramm/z80ramm_tests.c ****         } else {
 153              		.loc 1 28 13 is_stmt 1 view .LVU32
 154 0086 3146     		mov	r1, r6
 155 0088 0B48     		ldr	r0, .L17+16
 156 008a FFF7FEFF 		bl	printf
 157              	.LVL21:
 158              	.L7:
 159              		.loc 1 32 9 view .LVU33
 160              		.loc 1 32 11 is_stmt 0 view .LVU34
 161 008e 14F01F0F 		tst	r4, #31
 162 0092 CBD0     		beq	.L15
 163              	.L8:
 164              	.LBE4:
  11:App/z80ramm/z80ramm_tests.c ****     if(!z80_is_stopped) z80ramm_suspend_cpu();
 165              		.loc 1 11 25 discriminator 1 view .LVU35
 166 0094 0023     		movs	r3, #0
 167              	.L9:
 168              	.LVL22:
 169              	.LBB5:
 170              	.LBB3:
  33:App/z80ramm/z80ramm_tests.c ****         RAMMDELAY(10240);
 171              		.loc 1 33 9 discriminator 1 view .LVU36
 172 0096 B3F5205F 		cmp	r3, #10240
 173 009a CAD2     		bcs	.L16
 174              		.loc 1 33 9 is_stmt 1 discriminator 3 view .LVU37
 175              		.syntax unified
 176              	@ 33 "App/z80ramm/z80ramm_tests.c" 1
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 5


 177 009c 00BF     		NOP
 178              	@ 0 "" 2
 179              		.thumb
 180              		.syntax unified
 181 009e 0133     		adds	r3, r3, #1
 182              	.LVL23:
 183              		.loc 1 33 9 is_stmt 0 discriminator 3 view .LVU38
 184 00a0 F9E7     		b	.L9
 185              	.LVL24:
 186              	.L14:
 187              		.loc 1 33 9 discriminator 3 view .LVU39
 188              	.LBE3:
 189              	.LBE5:
  34:App/z80ramm/z80ramm_tests.c ****         }
  35:App/z80ramm/z80ramm_tests.c **** 
  36:App/z80ramm/z80ramm_tests.c ****     z80ramm_resume_cpu();
 190              		.loc 1 36 5 is_stmt 1 view .LVU40
 191 00a2 FFF7FEFF 		bl	z80ramm_resume_cpu
 192              	.LVL25:
  37:App/z80ramm/z80ramm_tests.c **** }
 193              		.loc 1 37 1 is_stmt 0 view .LVU41
 194 00a6 70BD     		pop	{r4, r5, r6, pc}
 195              	.LVL26:
 196              	.L18:
 197              		.loc 1 37 1 view .LVU42
 198              		.align	2
 199              	.L17:
 200 00a8 00000000 		.word	z80_is_stopped
 201 00ac 00000000 		.word	.LC0
 202 00b0 38000000 		.word	.LC3
 203 00b4 0C000000 		.word	.LC1
 204 00b8 24000000 		.word	.LC2
 205 00bc 48000000 		.word	.LC4
 206              		.cfi_endproc
 207              	.LFE401:
 209              		.section	.text.mem_read_test,"ax",%progbits
 210              		.align	1
 211              		.global	mem_read_test
 212              		.syntax unified
 213              		.thumb
 214              		.thumb_func
 215              		.fpu softvfp
 217              	mem_read_test:
 218              	.LFB402:
  38:App/z80ramm/z80ramm_tests.c **** 
  39:App/z80ramm/z80ramm_tests.c **** // Тест выводит в консоль первые 512 байт.
  40:App/z80ramm/z80ramm_tests.c **** void mem_read_test(void) {
 219              		.loc 1 40 26 is_stmt 1 view -0
 220              		.cfi_startproc
 221              		@ args = 0, pretend = 0, frame = 0
 222              		@ frame_needed = 0, uses_anonymous_args = 0
 223 0000 38B5     		push	{r3, r4, r5, lr}
 224              	.LCFI1:
 225              		.cfi_def_cfa_offset 16
 226              		.cfi_offset 3, -16
 227              		.cfi_offset 4, -12
 228              		.cfi_offset 5, -8
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 6


 229              		.cfi_offset 14, -4
  41:App/z80ramm/z80ramm_tests.c ****     if(!z80_is_stopped) z80ramm_suspend_cpu();
 230              		.loc 1 41 5 view .LVU44
 231              		.loc 1 41 8 is_stmt 0 view .LVU45
 232 0002 134B     		ldr	r3, .L28
 233 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 234              		.loc 1 41 7 view .LVU46
 235 0006 0BB1     		cbz	r3, .L25
 236              	.L20:
  40:App/z80ramm/z80ramm_tests.c ****     if(!z80_is_stopped) z80ramm_suspend_cpu();
 237              		.loc 1 40 26 discriminator 1 view .LVU47
 238 0008 0024     		movs	r4, #0
 239 000a 0EE0     		b	.L21
 240              	.L25:
 241              		.loc 1 41 25 is_stmt 1 discriminator 1 view .LVU48
 242 000c FFF7FEFF 		bl	z80ramm_suspend_cpu
 243              	.LVL27:
 244 0010 FAE7     		b	.L20
 245              	.LVL28:
 246              	.L27:
 247              	.LBB6:
  42:App/z80ramm/z80ramm_tests.c ****     uint8_t data = 0;
  43:App/z80ramm/z80ramm_tests.c ****     for(uint16_t adr = 0; adr <= 511; adr++) {
  44:App/z80ramm/z80ramm_tests.c ****         data = z80ramm_read(adr);
  45:App/z80ramm/z80ramm_tests.c ****         if(adr%16 == 0) {
  46:App/z80ramm/z80ramm_tests.c ****             printf("\r\n0x%04x ", adr);
 248              		.loc 1 46 13 view .LVU49
 249 0012 2146     		mov	r1, r4
 250 0014 0F48     		ldr	r0, .L28+4
 251 0016 FFF7FEFF 		bl	printf
 252              	.LVL29:
  47:App/z80ramm/z80ramm_tests.c ****             printf_flush();
 253              		.loc 1 47 13 view .LVU50
 254 001a FFF7FEFF 		bl	printf_flush
 255              	.LVL30:
 256              	.L22:
  48:App/z80ramm/z80ramm_tests.c ****         }
  49:App/z80ramm/z80ramm_tests.c ****         printf("%02x ", data);
 257              		.loc 1 49 9 discriminator 2 view .LVU51
 258 001e 2946     		mov	r1, r5
 259 0020 0D48     		ldr	r0, .L28+8
 260 0022 FFF7FEFF 		bl	printf
 261              	.LVL31:
  43:App/z80ramm/z80ramm_tests.c ****         data = z80ramm_read(adr);
 262              		.loc 1 43 42 is_stmt 0 discriminator 2 view .LVU52
 263 0026 0134     		adds	r4, r4, #1
 264              	.LVL32:
  43:App/z80ramm/z80ramm_tests.c ****         data = z80ramm_read(adr);
 265              		.loc 1 43 42 discriminator 2 view .LVU53
 266 0028 A4B2     		uxth	r4, r4
 267              	.LVL33:
 268              	.L21:
  43:App/z80ramm/z80ramm_tests.c ****         data = z80ramm_read(adr);
 269              		.loc 1 43 5 discriminator 1 view .LVU54
 270 002a B4F5007F 		cmp	r4, #512
 271 002e 07D2     		bcs	.L26
  44:App/z80ramm/z80ramm_tests.c ****         if(adr%16 == 0) {
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 7


 272              		.loc 1 44 9 is_stmt 1 view .LVU55
  44:App/z80ramm/z80ramm_tests.c ****         if(adr%16 == 0) {
 273              		.loc 1 44 16 is_stmt 0 view .LVU56
 274 0030 2046     		mov	r0, r4
 275 0032 FFF7FEFF 		bl	z80ramm_read
 276              	.LVL34:
 277 0036 0546     		mov	r5, r0
 278              	.LVL35:
  45:App/z80ramm/z80ramm_tests.c ****             printf("\r\n0x%04x ", adr);
 279              		.loc 1 45 9 is_stmt 1 view .LVU57
  45:App/z80ramm/z80ramm_tests.c ****             printf("\r\n0x%04x ", adr);
 280              		.loc 1 45 11 is_stmt 0 view .LVU58
 281 0038 14F00F0F 		tst	r4, #15
 282 003c EFD1     		bne	.L22
 283 003e E8E7     		b	.L27
 284              	.LVL36:
 285              	.L26:
  45:App/z80ramm/z80ramm_tests.c ****             printf("\r\n0x%04x ", adr);
 286              		.loc 1 45 11 view .LVU59
 287              	.LBE6:
  50:App/z80ramm/z80ramm_tests.c ****     }
  51:App/z80ramm/z80ramm_tests.c ****     printf("\r\n");
 288              		.loc 1 51 5 is_stmt 1 view .LVU60
 289 0040 0648     		ldr	r0, .L28+12
 290 0042 FFF7FEFF 		bl	puts
 291              	.LVL37:
  52:App/z80ramm/z80ramm_tests.c ****     printf_flush();
 292              		.loc 1 52 5 view .LVU61
 293 0046 FFF7FEFF 		bl	printf_flush
 294              	.LVL38:
  53:App/z80ramm/z80ramm_tests.c ****     z80ramm_resume_cpu();
 295              		.loc 1 53 5 view .LVU62
 296 004a FFF7FEFF 		bl	z80ramm_resume_cpu
 297              	.LVL39:
  54:App/z80ramm/z80ramm_tests.c **** }
 298              		.loc 1 54 1 is_stmt 0 view .LVU63
 299 004e 38BD     		pop	{r3, r4, r5, pc}
 300              	.LVL40:
 301              	.L29:
 302              		.loc 1 54 1 view .LVU64
 303              		.align	2
 304              	.L28:
 305 0050 00000000 		.word	z80_is_stopped
 306 0054 00000000 		.word	.LC5
 307 0058 0C000000 		.word	.LC6
 308 005c 14000000 		.word	.LC7
 309              		.cfi_endproc
 310              	.LFE402:
 312              		.section	.text.mem_write_test,"ax",%progbits
 313              		.align	1
 314              		.global	mem_write_test
 315              		.syntax unified
 316              		.thumb
 317              		.thumb_func
 318              		.fpu softvfp
 320              	mem_write_test:
 321              	.LFB403:
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 8


  55:App/z80ramm/z80ramm_tests.c **** 
  56:App/z80ramm/z80ramm_tests.c **** // Тест заполняет первые 512 байт памяти значениями равн
  57:App/z80ramm/z80ramm_tests.c **** void mem_write_test(void) {
 322              		.loc 1 57 27 is_stmt 1 view -0
 323              		.cfi_startproc
 324              		@ args = 0, pretend = 0, frame = 0
 325              		@ frame_needed = 0, uses_anonymous_args = 0
 326 0000 38B5     		push	{r3, r4, r5, lr}
 327              	.LCFI2:
 328              		.cfi_def_cfa_offset 16
 329              		.cfi_offset 3, -16
 330              		.cfi_offset 4, -12
 331              		.cfi_offset 5, -8
 332              		.cfi_offset 14, -4
  58:App/z80ramm/z80ramm_tests.c ****     if(!z80_is_stopped) z80ramm_suspend_cpu();
 333              		.loc 1 58 5 view .LVU66
 334              		.loc 1 58 8 is_stmt 0 view .LVU67
 335 0002 144B     		ldr	r3, .L39
 336 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 337              		.loc 1 58 7 view .LVU68
 338 0006 0BB1     		cbz	r3, .L36
 339              	.L31:
  57:App/z80ramm/z80ramm_tests.c ****     if(!z80_is_stopped) z80ramm_suspend_cpu();
 340              		.loc 1 57 27 discriminator 1 view .LVU69
 341 0008 0024     		movs	r4, #0
 342 000a 0EE0     		b	.L32
 343              	.L36:
 344              		.loc 1 58 25 is_stmt 1 discriminator 1 view .LVU70
 345 000c FFF7FEFF 		bl	z80ramm_suspend_cpu
 346              	.LVL41:
 347 0010 FAE7     		b	.L31
 348              	.LVL42:
 349              	.L38:
 350              	.LBB7:
  59:App/z80ramm/z80ramm_tests.c ****     for(uint16_t adr = 0; adr <= 511; adr++) {
  60:App/z80ramm/z80ramm_tests.c ****         z80ramm_write(adr, (uint8_t)adr);
  61:App/z80ramm/z80ramm_tests.c ****         if(adr%16 == 0) {
  62:App/z80ramm/z80ramm_tests.c ****             printf("\r\n0x%04x ", adr);
 351              		.loc 1 62 13 view .LVU71
 352 0012 2146     		mov	r1, r4
 353 0014 1048     		ldr	r0, .L39+4
 354 0016 FFF7FEFF 		bl	printf
 355              	.LVL43:
  63:App/z80ramm/z80ramm_tests.c ****             printf_flush();
 356              		.loc 1 63 13 view .LVU72
 357 001a FFF7FEFF 		bl	printf_flush
 358              	.LVL44:
 359              	.L33:
  64:App/z80ramm/z80ramm_tests.c ****         }
  65:App/z80ramm/z80ramm_tests.c ****         printf("%02x ", (uint8_t)adr);
 360              		.loc 1 65 9 discriminator 2 view .LVU73
 361 001e 2946     		mov	r1, r5
 362 0020 0E48     		ldr	r0, .L39+8
 363 0022 FFF7FEFF 		bl	printf
 364              	.LVL45:
  59:App/z80ramm/z80ramm_tests.c ****         z80ramm_write(adr, (uint8_t)adr);
 365              		.loc 1 59 42 is_stmt 0 discriminator 2 view .LVU74
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 9


 366 0026 0134     		adds	r4, r4, #1
 367              	.LVL46:
  59:App/z80ramm/z80ramm_tests.c ****         z80ramm_write(adr, (uint8_t)adr);
 368              		.loc 1 59 42 discriminator 2 view .LVU75
 369 0028 A4B2     		uxth	r4, r4
 370              	.LVL47:
 371              	.L32:
  59:App/z80ramm/z80ramm_tests.c ****         z80ramm_write(adr, (uint8_t)adr);
 372              		.loc 1 59 5 discriminator 1 view .LVU76
 373 002a B4F5007F 		cmp	r4, #512
 374 002e 08D2     		bcs	.L37
  60:App/z80ramm/z80ramm_tests.c ****         if(adr%16 == 0) {
 375              		.loc 1 60 9 is_stmt 1 view .LVU77
 376 0030 E5B2     		uxtb	r5, r4
 377 0032 2946     		mov	r1, r5
 378 0034 2046     		mov	r0, r4
 379 0036 FFF7FEFF 		bl	z80ramm_write
 380              	.LVL48:
  61:App/z80ramm/z80ramm_tests.c ****             printf("\r\n0x%04x ", adr);
 381              		.loc 1 61 9 view .LVU78
  61:App/z80ramm/z80ramm_tests.c ****             printf("\r\n0x%04x ", adr);
 382              		.loc 1 61 11 is_stmt 0 view .LVU79
 383 003a 14F00F0F 		tst	r4, #15
 384 003e EED1     		bne	.L33
 385 0040 E7E7     		b	.L38
 386              	.L37:
 387              	.LBE7:
  66:App/z80ramm/z80ramm_tests.c ****     }
  67:App/z80ramm/z80ramm_tests.c ****     printf("\r\ntest data written\r\n");
 388              		.loc 1 67 5 is_stmt 1 view .LVU80
 389 0042 0748     		ldr	r0, .L39+12
 390 0044 FFF7FEFF 		bl	puts
 391              	.LVL49:
  68:App/z80ramm/z80ramm_tests.c ****     printf_flush();
 392              		.loc 1 68 5 view .LVU81
 393 0048 FFF7FEFF 		bl	printf_flush
 394              	.LVL50:
  69:App/z80ramm/z80ramm_tests.c ****     z80ramm_resume_cpu();
 395              		.loc 1 69 5 view .LVU82
 396 004c FFF7FEFF 		bl	z80ramm_resume_cpu
 397              	.LVL51:
  70:App/z80ramm/z80ramm_tests.c **** }
 398              		.loc 1 70 1 is_stmt 0 view .LVU83
 399 0050 38BD     		pop	{r3, r4, r5, pc}
 400              	.LVL52:
 401              	.L40:
 402              		.loc 1 70 1 view .LVU84
 403 0052 00BF     		.align	2
 404              	.L39:
 405 0054 00000000 		.word	z80_is_stopped
 406 0058 00000000 		.word	.LC5
 407 005c 0C000000 		.word	.LC6
 408 0060 00000000 		.word	.LC8
 409              		.cfi_endproc
 410              	.LFE403:
 412              		.section	.text.mem_erase_test,"ax",%progbits
 413              		.align	1
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 10


 414              		.global	mem_erase_test
 415              		.syntax unified
 416              		.thumb
 417              		.thumb_func
 418              		.fpu softvfp
 420              	mem_erase_test:
 421              	.LFB404:
  71:App/z80ramm/z80ramm_tests.c **** 
  72:App/z80ramm/z80ramm_tests.c **** // Тест заполняем весь объем памяти нулями (стирает).
  73:App/z80ramm/z80ramm_tests.c **** void mem_erase_test(void) {
 422              		.loc 1 73 27 is_stmt 1 view -0
 423              		.cfi_startproc
 424              		@ args = 0, pretend = 0, frame = 0
 425              		@ frame_needed = 0, uses_anonymous_args = 0
 426 0000 10B5     		push	{r4, lr}
 427              	.LCFI3:
 428              		.cfi_def_cfa_offset 8
 429              		.cfi_offset 4, -8
 430              		.cfi_offset 14, -4
  74:App/z80ramm/z80ramm_tests.c ****     if(!z80_is_stopped) z80ramm_suspend_cpu();
 431              		.loc 1 74 5 view .LVU86
 432              		.loc 1 74 8 is_stmt 0 view .LVU87
 433 0002 124B     		ldr	r3, .L50
 434 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 435              		.loc 1 74 7 view .LVU88
 436 0006 0BB1     		cbz	r3, .L47
 437              	.L42:
  73:App/z80ramm/z80ramm_tests.c ****     if(!z80_is_stopped) z80ramm_suspend_cpu();
 438              		.loc 1 73 27 discriminator 1 view .LVU89
 439 0008 0024     		movs	r4, #0
 440 000a 08E0     		b	.L43
 441              	.L47:
 442              		.loc 1 74 25 is_stmt 1 discriminator 1 view .LVU90
 443 000c FFF7FEFF 		bl	z80ramm_suspend_cpu
 444              	.LVL53:
 445 0010 FAE7     		b	.L42
 446              	.LVL54:
 447              	.L49:
 448              	.LBB8:
  75:App/z80ramm/z80ramm_tests.c ****     for(uint16_t adr = 0; adr <= (RAM_LEN-1); adr++) {
  76:App/z80ramm/z80ramm_tests.c ****         z80ramm_write(adr, 0);
  77:App/z80ramm/z80ramm_tests.c ****         if(z80ramm_read(adr) != 0) printf("Erase error@0x%04x\r\n", adr);
 449              		.loc 1 77 36 discriminator 1 view .LVU91
 450 0012 2146     		mov	r1, r4
 451 0014 0E48     		ldr	r0, .L50+4
 452 0016 FFF7FEFF 		bl	printf
 453              	.LVL55:
 454              	.L44:
  75:App/z80ramm/z80ramm_tests.c ****     for(uint16_t adr = 0; adr <= (RAM_LEN-1); adr++) {
 455              		.loc 1 75 50 is_stmt 0 discriminator 2 view .LVU92
 456 001a 0134     		adds	r4, r4, #1
 457              	.LVL56:
  75:App/z80ramm/z80ramm_tests.c ****     for(uint16_t adr = 0; adr <= (RAM_LEN-1); adr++) {
 458              		.loc 1 75 50 discriminator 2 view .LVU93
 459 001c A4B2     		uxth	r4, r4
 460              	.LVL57:
 461              	.L43:
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 11


  75:App/z80ramm/z80ramm_tests.c ****     for(uint16_t adr = 0; adr <= (RAM_LEN-1); adr++) {
 462              		.loc 1 75 5 discriminator 1 view .LVU94
 463 001e 48F21103 		movw	r3, #32785
 464 0022 9C42     		cmp	r4, r3
 465 0024 09D8     		bhi	.L48
  76:App/z80ramm/z80ramm_tests.c ****         if(z80ramm_read(adr) != 0) printf("Erase error@0x%04x\r\n", adr);
 466              		.loc 1 76 9 is_stmt 1 view .LVU95
 467 0026 0021     		movs	r1, #0
 468 0028 2046     		mov	r0, r4
 469 002a FFF7FEFF 		bl	z80ramm_write
 470              	.LVL58:
 471              		.loc 1 77 9 view .LVU96
 472              		.loc 1 77 12 is_stmt 0 view .LVU97
 473 002e 2046     		mov	r0, r4
 474 0030 FFF7FEFF 		bl	z80ramm_read
 475              	.LVL59:
 476              		.loc 1 77 11 view .LVU98
 477 0034 0028     		cmp	r0, #0
 478 0036 F0D0     		beq	.L44
 479 0038 EBE7     		b	.L49
 480              	.L48:
 481              	.LBE8:
  78:App/z80ramm/z80ramm_tests.c ****     }
  79:App/z80ramm/z80ramm_tests.c ****     printf("\r\nBBSRAM erased\r\n");
 482              		.loc 1 79 5 is_stmt 1 view .LVU99
 483 003a 0648     		ldr	r0, .L50+8
 484 003c FFF7FEFF 		bl	puts
 485              	.LVL60:
  80:App/z80ramm/z80ramm_tests.c ****     printf_flush();
 486              		.loc 1 80 5 view .LVU100
 487 0040 FFF7FEFF 		bl	printf_flush
 488              	.LVL61:
  81:App/z80ramm/z80ramm_tests.c ****     z80ramm_resume_cpu();
 489              		.loc 1 81 5 view .LVU101
 490 0044 FFF7FEFF 		bl	z80ramm_resume_cpu
 491              	.LVL62:
  82:App/z80ramm/z80ramm_tests.c **** }
 492              		.loc 1 82 1 is_stmt 0 view .LVU102
 493 0048 10BD     		pop	{r4, pc}
 494              	.LVL63:
 495              	.L51:
 496              		.loc 1 82 1 view .LVU103
 497 004a 00BF     		.align	2
 498              	.L50:
 499 004c 00000000 		.word	z80_is_stopped
 500 0050 00000000 		.word	.LC9
 501 0054 18000000 		.word	.LC10
 502              		.cfi_endproc
 503              	.LFE404:
 505              		.section	.rodata.mem_erase_test.str1.4,"aMS",%progbits,1
 506              		.align	2
 507              	.LC9:
 508 0000 45726173 		.ascii	"Erase error@0x%04x\015\012\000"
 508      65206572 
 508      726F7240 
 508      30782530 
 508      34780D0A 
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 12


 509 0015 000000   		.space	3
 510              	.LC10:
 511 0018 0D0A4242 		.ascii	"\015\012BBSRAM erased\015\000"
 511      5352414D 
 511      20657261 
 511      7365640D 
 511      00
 512              		.section	.rodata.mem_read_test.str1.4,"aMS",%progbits,1
 513              		.align	2
 514              	.LC5:
 515 0000 0D0A3078 		.ascii	"\015\0120x%04x \000"
 515      25303478 
 515      2000
 516 000a 0000     		.space	2
 517              	.LC6:
 518 000c 25303278 		.ascii	"%02x \000"
 518      2000
 519 0012 0000     		.space	2
 520              	.LC7:
 521 0014 0D00     		.ascii	"\015\000"
 522              		.section	.rodata.mem_write_test.str1.4,"aMS",%progbits,1
 523              		.align	2
 524              	.LC8:
 525 0000 0D0A7465 		.ascii	"\015\012test data written\015\000"
 525      73742064 
 525      61746120 
 525      77726974 
 525      74656E0D 
 526              		.section	.rodata.z80ramm_test.str1.4,"aMS",%progbits,1
 527              		.align	2
 528              	.LC0:
 529 0000 74657374 		.ascii	"test ram\015\000"
 529      2072616D 
 529      0D00
 530 000a 0000     		.space	2
 531              	.LC1:
 532 000c 72656164 		.ascii	"read 0x%04x 0x%02x\015\012\000"
 532      20307825 
 532      30347820 
 532      30782530 
 532      32780D0A 
 533 0021 000000   		.space	3
 534              	.LC2:
 535 0024 4572726F 		.ascii	"Error at 0x%04x\015\012\000"
 535      72206174 
 535      20307825 
 535      3034780D 
 535      0A00
 536 0036 0000     		.space	2
 537              	.LC3:
 538 0038 4F4B2061 		.ascii	"OK at 0x%04x\015\012\000"
 538      74203078 
 538      25303478 
 538      0D0A00
 539 0047 00       		.space	1
 540              	.LC4:
 541 0048 77726974 		.ascii	"write 0x%04x 0x%02x\015\012\000"
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 13


 541      65203078 
 541      25303478 
 541      20307825 
 541      3032780D 
 542              		.text
 543              	.Letext0:
 544              		.file 2 "c:\\arm_tool\\gcc\\arm-none-eabi\\include\\machine\\_default_types.h"
 545              		.file 3 "c:\\arm_tool\\gcc\\arm-none-eabi\\include\\sys\\lock.h"
 546              		.file 4 "c:\\arm_tool\\gcc\\arm-none-eabi\\include\\sys\\_types.h"
 547              		.file 5 "c:\\arm_tool\\gcc\\lib\\gcc\\arm-none-eabi\\8.2.1\\include\\stddef.h"
 548              		.file 6 "c:\\arm_tool\\gcc\\arm-none-eabi\\include\\sys\\reent.h"
 549              		.file 7 "c:\\arm_tool\\gcc\\arm-none-eabi\\include\\sys\\_stdint.h"
 550              		.file 8 "Drivers/CMSIS/Include/core_cm3.h"
 551              		.file 9 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 552              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 553              		.file 11 "Core/Inc/main.h"
 554              		.file 12 "App/z80ramm/z80ramm.h"
 555              		.file 13 "c:\\arm_tool\\gcc\\arm-none-eabi\\include\\stdio.h"
 556              		.file 14 "App/Retarget/inc/retarget.h"
 557              		.file 15 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_ll_dma.h"
 558              		.file 16 "<built-in>"
ARM GAS  C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s 			page 14


DEFINED SYMBOLS
                            *ABS*:0000000000000000 z80ramm_tests.c
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:16     .text.z80ramm_test:0000000000000000 $t
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:24     .text.z80ramm_test:0000000000000000 z80ramm_test
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:200    .text.z80ramm_test:00000000000000a8 $d
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:210    .text.mem_read_test:0000000000000000 $t
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:217    .text.mem_read_test:0000000000000000 mem_read_test
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:305    .text.mem_read_test:0000000000000050 $d
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:313    .text.mem_write_test:0000000000000000 $t
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:320    .text.mem_write_test:0000000000000000 mem_write_test
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:405    .text.mem_write_test:0000000000000054 $d
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:413    .text.mem_erase_test:0000000000000000 $t
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:420    .text.mem_erase_test:0000000000000000 mem_erase_test
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:499    .text.mem_erase_test:000000000000004c $d
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:506    .rodata.mem_erase_test.str1.4:0000000000000000 $d
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:513    .rodata.mem_read_test.str1.4:0000000000000000 $d
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:523    .rodata.mem_write_test.str1.4:0000000000000000 $d
C:\Users\Kaa\AppData\Local\Temp\ccgBvbwE.s:527    .rodata.z80ramm_test.str1.4:0000000000000000 $d

UNDEFINED SYMBOLS
puts
z80ramm_suspend_cpu
printf
printf_flush
z80ramm_read
z80ramm_write
z80ramm_resume_cpu
z80_is_stopped
